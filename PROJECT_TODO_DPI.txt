【DPI補正 TODO / 方針メモ】2025-10-27

■直近のTODO
1. OverlayWindow → SelectionResult の DPI 換算を見直し、WPF の DIPs を 1.25 倍で固定換算しないよう修正する。
2. CaptureService 側で取得した DPI（GetDpiForMonitor など）をログに残し、モニタごとの物理値を確認できるようにする。
3. 修正後、tests/scripts/measure_selection_offsets.ps1 を用いて以下 4 シナリオを再計測し、dx/dy/dw/dh がすべて 0 になることを確認する。
   - primary_100pct / primary_125pct
   - secondary_100pct / secondary_125pct
4. 余裕があれば 150% / 200% のシナリオを追加し、同じ仕組みで hiDPI 環境を検証できるよう準備する。

■運用方針（Policy）
- DPI 処理はモニタ単位で完結させ、マウス位置から取得した物理座標を基準にする。WPF の DIP 変換結果だけに依存しない。
- 公式の検証スクリプトは tests/scripts/measure_selection_offsets.ps1 とする。実行前チェックリストに沿って操作し、captured rect と差分を必ず記録する。
- HTML ビジュアライザー（ocr_coordinate_offset_visualizer.html）はベースラインとして維持し、ズレ量の確認はログとスクリプトで行う。必要に応じて新しい倍率のみ追加する。
- 新しい DPI 値をサポートする際も、まずログ取得 → スクリプト検証 → 可視化確認の順で行い、既存 100%/125% の信頼性を損なわないようにする。
